# klavogonki-test

## 1. Подготовка окружения
> Необходимая версия Python: 3.11.3

### Установка пакетов
Для установки зависимостей, необходимо выполнить команду `pip install -r ./requirements.txt` или `pip3 install -r ./requirements.txt`, в зависимости от локальной инсталляции `Python`.

### Запуск тестов
Для запуска тестов, необходимо выполнить команду `python -m pytest -s` или `python3 -m pytest -s`, в зависимости от локальной инсталляции `Python`.

## 2. Описание тестов

### Тест test_quick_game
> Стабильный, сразу проверяет на наличие "ловушек" 
> 
> Под "ловушками" здесь и далее подразумеваются кириллические символы, написанные буквами латинского алфавита

Данный тест выполняет следующие шаги:
1. Открывает страницу klavogonki.ru и запускает быструю игру
2. Копирует текст игровой сессии
3. Вставляет текст по букве, предварительно проверяя и очищая от "ловушек" 
4. Выводит результат игры: скорость и кол-во ошибок. Проверяет соответствие условиям задания (Скорость должна быть >=400, кол-во ошибок = 0)

### Тест test_quick_game_with_errors
> Нестабильный, сразу не проверяет на наличие "ловушек"
> 
> При нахождении "ловушки", стирает символ и исправляет на кириллический

> ⚠️ Тест помечен, как `skipped`.
>
> Для запуска необходимо удалить строку `@pytest.mark.skip(reason="Медленный тест, упадет в ошибку")` в файле `tests/test_quick_game_page.py`

Данный тест выполняет следующие шаги:
1. Открывает страницу klavogonki.ru и запускает быструю игру
2. Копирует текст игровой сессии
3. Вставляет текст по букве, не проверяя предварительно на наличие "ловушки"
4. При появлении на странице ошибки ввода ("ловушки"), она исправляется заменой
5. Выводит результат игры: скорость и кол-во ошибок. Проверяет соответствие условиям задания (Скорость должна быть >=400, кол-во ошибок = 0)

## 3. Существующие проблемы

1. Тест `test_quick_game_with_errors` слишком медленный, всегда будет выдавать ошибку. 

    Это связано с тем, что после каждого ввода символа необходимо проверять страницу на наличие ошибки ввода (метод `quick_game_page.check_error`).
2. Два `assert` в одном тесте. 

   В случае, если первая проверка выдаст ошибку, вторая не будет выполнена, что происходит в тесте `test_quick_game_with_errors`.


